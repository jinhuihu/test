# Android 验证码识别助手 - 使用指南

## 快速开始

### 第一步：安装应用

1. **下载APK文件**
   - 将项目编译生成APK文件
   - 或从发布页面下载预编译的APK

2. **安装到手机**
   ```bash
   # 使用ADB安装
   adb install app-debug.apk
   
   # 或直接在手机上安装
   # 允许安装未知来源应用
   ```

### 第二步：配置权限

1. **启用无障碍服务**
   - 打开手机 **设置** → **辅助功能** → **无障碍**
   - 找到 **"验证码识别助手"**
   - 点击进入，开启服务
   - 点击 **"确定"** 授权

2. **授予其他权限**
   - 应用会自动请求存储权限
   - 点击 **"允许"** 授权

### 第三步：启动服务

1. **打开应用**
   - 点击桌面上的 **"验证码识别助手"** 图标

2. **启动服务**
   - 点击 **"启动服务"** 按钮
   - 状态显示为 **"服务已启动"**

## 详细使用步骤

### 场景一：抢购商品验证

1. **打开购物网站**
   - 在Chrome浏览器中打开目标网站
   - 进入商品抢购页面

2. **等待验证码出现**
   - 点击抢购按钮
   - 等待九宫格验证码加载

3. **自动识别和点击**
   - 应用会自动检测验证码
   - 识别目标物体（如"飞机"）
   - 自动点击包含飞机的图片
   - 自动点击"验证"按钮

### 场景二：登录验证

1. **打开登录页面**
   - 在支持的浏览器中打开登录页面
   - 输入用户名和密码

2. **触发验证码**
   - 点击登录按钮
   - 等待验证码出现

3. **自动处理**
   - 应用会自动识别和点击验证码
   - 完成登录流程

## 支持的网站和浏览器

### 支持的浏览器
- ✅ Google Chrome
- ✅ UC浏览器
- ✅ QQ浏览器
- ✅ 系统默认浏览器

### 支持的验证码类型
- ✅ 九宫格图片验证码
- ✅ 飞机识别
- ✅ 汽车识别
- ✅ 自行车识别
- ✅ 其他常见物体识别

## 界面说明

### 主界面功能

1. **状态显示**
   - 显示当前服务状态
   - 显示识别进度和结果

2. **功能说明**
   - 介绍应用的主要功能
   - 使用步骤说明

3. **控制按钮**
   - **启动服务**: 开始验证码识别服务
   - **停止服务**: 停止验证码识别服务
   - **打开无障碍设置**: 快速跳转到无障碍设置

4. **日志显示**
   - 显示详细的运行日志
   - 帮助诊断问题

## 高级配置

### 调整识别参数

如果识别不准确，可以修改以下参数：

1. **九宫格位置调整**
   ```java
   // 在 ImageRecognizer.java 中修改
   private static final int DIALOG_LEFT_MARGIN = 50;   // 左边距
   private static final int DIALOG_TOP_MARGIN = 200;   // 上边距
   private static final int DIALOG_WIDTH = 300;        // 对话框宽度
   private static final int DIALOG_HEIGHT = 400;       // 对话框高度
   ```

2. **点击延迟调整**
   ```java
   // 在 CaptchaService.java 中修改
   Thread.sleep(200);  // 图片点击间隔
   Thread.sleep(500);  // 验证按钮点击延迟
   ```

### 添加新的目标物体

1. **修改关键词列表**
   ```java
   // 在 CaptchaOCR.java 中添加
   private static final String[] TARGET_KEYWORDS = {
       "飞机", "汽车", "自行车", "摩托车", "公交车", "卡车", "火车",
       "船", "直升机", "行人", "动物", "狗", "猫", "鸟",
       "树", "花", "草", "山", "水", "桥", "房子", "建筑",
       "你的新关键词"  // 添加新的关键词
   };
   ```

2. **添加识别逻辑**
   ```java
   // 在 ImageRecognizer.java 中添加
   private boolean isTargetObject(String detectedLabel, String targetObject) {
       if (targetObject.contains("你的新物体")) {
           return detectedLabel.contains("对应的英文标签");
       }
       // ... 其他逻辑
   }
   ```

## 故障排除

### 常见问题

1. **服务无法启动**
   ```
   问题: 点击"启动服务"后状态仍显示"服务未启动"
   解决: 
   - 检查无障碍服务是否已启用
   - 重启应用并重新授权
   - 检查手机是否支持无障碍服务
   ```

2. **识别不准确**
   ```
   问题: 验证码识别错误或无法识别
   解决:
   - 确保网络连接正常（ML Kit需要网络）
   - 检查验证码图片是否清晰
   - 调整九宫格位置参数
   - 确保目标物体在支持列表中
   ```

3. **点击不生效**
   ```
   问题: 识别正确但点击无效
   解决:
   - 检查无障碍服务权限
   - 确保目标应用在支持列表中
   - 检查点击坐标是否正确
   - 尝试重启无障碍服务
   ```

4. **应用崩溃**
   ```
   问题: 应用运行过程中崩溃
   解决:
   - 检查手机内存是否充足
   - 确保Android版本兼容（需要5.0+）
   - 查看日志文件定位问题
   - 重新安装应用
   ```

### 日志分析

查看应用日志可以帮助诊断问题：

1. **打开日志**
   - 在主界面底部查看日志信息
   - 或使用ADB查看详细日志

2. **常见日志信息**
   ```
   "开始处理验证码..." - 检测到验证码
   "识别到目标物体: 飞机" - OCR识别成功
   "检测到 9 个图片区域" - 九宫格检测成功
   "找到 3 个包含目标物体的图片" - 图像识别成功
   "已点击验证按钮" - 点击完成
   ```

3. **错误日志**
   ```
   "OCR识别失败" - 文字识别出错
   "未找到完整的九宫格" - 图片区域检测失败
   "未找到验证按钮" - 验证按钮定位失败
   ```

## 性能优化

### 提高识别速度

1. **减少处理时间**
   - 关闭不必要的后台应用
   - 确保手机性能充足
   - 使用较新的Android版本

2. **提高识别准确率**
   - 确保网络连接稳定
   - 在光线充足的环境下使用
   - 保持验证码图片清晰

### 降低资源消耗

1. **内存优化**
   - 定期重启应用
   - 关闭不必要的功能
   - 使用轻量级浏览器

2. **电池优化**
   - 避免长时间运行
   - 在不需要时停止服务
   - 使用省电模式

## 安全提醒

### 使用建议

1. **仅用于学习**
   - 本项目仅供技术学习和研究
   - 不要用于商业用途

2. **遵守法律法规**
   - 确保使用符合当地法律
   - 不要用于恶意目的

3. **保护隐私**
   - 应用不会收集个人信息
   - 所有处理都在本地进行

### 风险提示

1. **技术风险**
   - 识别准确率不是100%
   - 可能影响正常使用体验

2. **安全风险**
   - 需要授予无障碍服务权限
   - 可能被安全软件误报

## 技术支持

### 获取帮助

1. **查看文档**
   - 阅读README.md了解技术细节
   - 查看代码注释了解实现原理

2. **提交问题**
   - 在GitHub上提交Issue
   - 提供详细的错误信息和日志

3. **社区支持**
   - 加入技术交流群
   - 与其他用户分享经验

### 更新说明

1. **检查更新**
   - 定期查看项目更新
   - 下载最新版本

2. **版本兼容**
   - 注意Android版本要求
   - 备份重要数据

---

**祝您使用愉快！如有问题，请随时联系技术支持。**
